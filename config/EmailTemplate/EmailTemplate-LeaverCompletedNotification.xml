<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE EmailTemplate PUBLIC "sailpoint.dtd" "sailpoint.dtd">
<EmailTemplate created="1680671893490" id="c0a81db3874f10c281874fd9e7f20071" name="Leaver Completed Notification">
  <Body>
   		 
		#set($ctx = $spTools.class.forName("sailpoint.api.SailPointFactory").getMethod("getFactory", null).invoke(null,null).getCurrentContext())
		#set($emailTools = $spTools.class.forName("sailpoint.rapidsetup.tools.EmailTools").getMethod("instance", null).invoke(null,null))
		#set($reqType = $workflow.requestType)
		#set($styleSheet = $emailTools.getEmailSection($ctx, "styleSheet"))
		#set($headerTemplate = $emailTools.getEmailSection($ctx, "headerTemplate")) #set($footerTemplate = $emailTools.getEmailSection($ctx, "footerTemplate"))
			&lt;html>		
			&lt;head>
			&lt;meta charset="UTF-8">	    
			#if( $styleSheet )
			$styleSheet
			#end 
			&lt;/head>
	    	&lt;body>
	    	#if( $headerTemplate )
			$headerTemplate
			#end
			&lt;br/>       
			Dear $recipientDisplayName,&lt;br/>
			&lt;p>Termination of Identity '$refIdentityDisplayName' completed.&lt;/p>
			#if ($plan &amp;&amp; !$disableStaticManagerContent)
			        &lt;ul>
				#foreach ($acctReq in $plan.accountRequests)
					&lt;li>Application: $!acctReq.applicationName&lt;/li>
					&lt;li>Account ID : $!acctReq.nativeIdentity&lt;/li>
                    &lt;li>Operation: $!acctReq.op&lt;/li>
			        &lt;ul>
					#foreach ($attrReq in $acctReq.attributeRequests)
						&lt;li>Attribute Name : $!attrReq.name&lt;/li>
                        &lt;li>Display Value: $!attrReq.displayValue&lt;/li>
                        &lt;li>Operation: $!attrReq.op&lt;/li>
            #if ($!attrReq.displayValue)
            &lt;li>Attribute Value: $!attrReq.displayValue&lt;/li>
            #else
    			  &lt;li>Attribute Value: $!attrReq.value&lt;/li>
    			  #end
			        #end           
			        &lt;/ul>
			      #end
				    &lt;/ul>
			#end
			#if ($dynamicAppContent)
				&lt;table>
					#if (!$disableStaticManagerContent)
						#foreach( $key in $dynamicAppContent.keySet() )
						&lt;tr>&lt;td>$key&lt;/td>&lt;td>$dynamicAppContent.get($key)&lt;/td>&lt;/tr>
						#end
					#else
						#foreach( $key in $dynamicAppContent.keySet() )
						&lt;tr>&lt;td>$dynamicAppContent.get($key)&lt;/td>&lt;/tr>
						#end
					#end
				&lt;/table>
			#end	
			#if ( $provisioningErrors )
				The following errors occurred during provisioning:
				&lt;ul>
				#foreach ($error in $provisioningErrors)
				&lt;li>$!error&lt;/li>
				#end
				&lt;/ul>
			#end
			#if( $footerTemplate )
			$footerTemplate
			#end
			&lt;/body>
		&lt;/html>
				
    </Body>
  <Description>
      Email Template for notifying the manager when Leaver process has been completed
    </Description>
  <Signature>
    <Inputs>
      <Argument name="workflow" type="Workflow">
        <Description>The Workflow object being executed.</Description>
      </Argument>
      <Argument name="approvalSet" type="ApprovalSet">
        <Description>The ApprovalSet object contained in the workflow.</Description>
      </Argument>
      <Argument name="refIdentityDisplayName" type="string">
        <Description>The name of the Identity that is registering.</Description>
      </Argument>
      <Argument name="recipientDisplayName" type="string">
        <Description>The display name of the Identity that is registering.</Description>
      </Argument>
      <Argument name="provisioningErrors" type="List">
        <Description>Any provisioning errors that may have occurred.</Description>
      </Argument>
      <Argument name="disableStaticManagerContent" type="boolean">
        <Description>if false, then do not hide static content</Description>
      </Argument>
    </Inputs>
  </Signature>
  <Subject>#if($provisioningErrors) Error:#end User '$refIdentityDisplayName' has been terminated </Subject>
</EmailTemplate>
